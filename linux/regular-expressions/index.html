<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Regular Expressions | bits-pieces</title><link rel=icon href=/bits-pieces/favicon/favicon-32x32.png type=image/x-icon><link rel=stylesheet href=/bits-pieces/main.min.css media=screen><link rel=stylesheet href=/bits-pieces/custom.css media=screen></head><body><div class=wrapper><input type=checkbox class=hidden id=menu-control><header class=gdoc-header><div class="container flex align-center justify-between"><label for=menu-control class=gdoc-nav__control><svg class="icon menu"><use xlink:href="#menu"/></svg><svg class="icon arrow-back"><use xlink:href="#arrow_back"/></svg></label><a class=gdoc-header__link href=https://l10178.github.io/bits-pieces/><span class="gdoc-brand flex align-center"><img class=gdoc-brand__img src=/bits-pieces/images/logos/logo.png alt=bits-pieces width=38 height=38>
bits-pieces</span></a></div></header><main class="container flex flex-even"><aside class=gdoc-nav><nav><div class=gdoc-search><svg class="icon search"><use xlink:href="#search"/></svg><input type=text id=gdoc-search-input class=gdoc-search__input placeholder=Search... aria-label=Search maxlength=64><div class="gdoc-search__spinner spinner hidden"></div><ul id=gdoc-search-results class=gdoc-search__list></ul></div><section class=gdoc-nav--main><h2>Navigation</h2><ul class=gdoc-nav__list><li><span class=flex><a href=/bits-pieces/devops/ class=gdoc-nav__entry>DevOps</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=/bits-pieces/devops/mysql5.7to8.0/ class=gdoc-nav__entry>MySQL5.7升级至8.0</a></span></li><li><span class=flex><a href=/bits-pieces/devops/mysql-large-import/ class=gdoc-nav__entry>MySQL大文件导入优化</a></span></li><li><span class=flex><a href=/bits-pieces/devops/nexus/ class=gdoc-nav__entry>Nexus3 批量导入</a></span></li><li><span class=flex><a href=/bits-pieces/devops/superset/ class=gdoc-nav__entry>Superset 对接 ClickHouse</a></span></li><li><span class=flex><a href=/bits-pieces/devops/cdr/ class=gdoc-nav__entry>使用Visual Studio Code搭建多用户远程IDE</a></span></li></ul></li><li><span class=flex>Javas</span><ul class=gdoc-nav__list><li><span class=flex><a href=/bits-pieces/java/jvm/ class=gdoc-nav__entry>Java进程内存分析</a></span></li><li><span class=flex><a href=/bits-pieces/java/spring-start-site/ class=gdoc-nav__entry>Spring Start脚手架快速入门</a></span></li><li><span class=flex><a href=/bits-pieces/java/spring/ class=gdoc-nav__entry>从Spring到Spring Cloud</a></span></li></ul></li><li><span class=flex>Kubernetes</span><ul class=gdoc-nav__list><li><span class=flex><a href=/bits-pieces/kubernetes/envoy/ class=gdoc-nav__entry>Envoy生产配置最佳实践</a></span></li><li><span class=flex><a href=/bits-pieces/kubernetes/tldr/ class=gdoc-nav__entry>TL;DR</a></span></li><li><span class=flex><a href=/bits-pieces/kubernetes/cka/ class=gdoc-nav__entry>备考 CKA 过程，CKA 真题</a></span></li></ul></li><li><span class=flex><a href=/bits-pieces/linux/ class=gdoc-nav__entry>Linux</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=/bits-pieces/linux/regular-expressions/ class="gdoc-nav__entry is-active">Regular Expressions</a></span></li><li><span class=flex><a href=/bits-pieces/linux/git/ class=gdoc-nav__entry>Git常用配置</a></span></li><li><span class=flex><a href=/bits-pieces/linux/history/ class=gdoc-nav__entry>History入门</a></span></li><li><span class=flex><a href=/bits-pieces/linux/pngquant/ class=gdoc-nav__entry>PNG图片批量压缩</a></span></li><li><span class=flex><a href=/bits-pieces/linux/shell-coding/ class=gdoc-nav__entry>Shell 编程实用句式</a></span></li><li><span class=flex><a href=/bits-pieces/linux/tcpdump/ class=gdoc-nav__entry>tcpdump</a></span></li><li><span class=flex><a href=/bits-pieces/linux/transaction/ class=gdoc-nav__entry>数据库事务控制</a></span></li><li><span class=flex><a href=/bits-pieces/linux/tar.gz/ class=gdoc-nav__entry>文件压缩解压</a></span></li></ul></li><li><span class=flex><a href=/bits-pieces/windows/ class=gdoc-nav__entry>Windows</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=/bits-pieces/windows/takeown/ class=gdoc-nav__entry>Windows提权 + 设置环境变量</a></span></li></ul></li><li><span class=flex><a href=/bits-pieces/knives/ class=gdoc-nav__entry>瑞士军刀</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=/bits-pieces/knives/ripgrep/ class=gdoc-nav__entry>ripgrep</a></span></li><li><span class=flex><a href=/bits-pieces/knives/tldr/ class=gdoc-nav__entry>TL;DR</a></span></li></ul></li></ul></section><section class=gdoc-nav--more><h2>More</h2><ul class=gdoc-nav__list><li><span class=flex><svg class="icon download"><use xlink:href="#download"/></svg><a href=https://github.com/l10178/bits-pieces/releases class=gdoc-nav__entry>Releases</a></span></li><li><span class=flex><svg class="icon github"><use xlink:href="#github"/></svg><a href=https://github.com/l10178/bits-pieces class=gdoc-nav__entry>View Source</a></span></li></ul></section></nav></aside><div class=gdoc-page><div class="gdoc-page__header flex flex-wrap justify-between" itemscope itemtype=https://schema.org/Breadcrumb><span></span><span><svg class="icon code"><use xlink:href="#code"/></svg><a href=https://github.com/l10178/bits-pieces/edit/main/content/linux/regular-expressions.md>Edit this page</a></span></div><article class=gdoc-markdown><h1>Regular Expressions</h1><h1 id=正则表达式从入门到放弃>正则表达式从入门到放弃</h1><p>首先来看几个问题：</p><ol><li>假设有一个字符串“a b c”(中间是一个空格)，想实现按空格分割成一个数组[&ldquo;a&rdquo;,&ldquo;b&rdquo;,&ldquo;c&rdquo;]，用 Java 或 JavaScript 代码如何实现。</li><li>原始数组改成"a b c"(中间是 N 个空格)，仍分割成数组[&ldquo;a&rdquo;,&ldquo;b&rdquo;,&ldquo;c&rdquo;]，如何实现。</li></ol><div class=highlight><pre class=chroma><code class=language-java data-lang=java>    <span class=nd>@Test</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>testSplit</span><span class=o>()</span> <span class=o>{</span>
        <span class=n>String</span> <span class=n>dotStr</span> <span class=o>=</span> <span class=s>&#34;a.b.c&#34;</span><span class=o>;</span>
        <span class=n>assertEquals</span><span class=o>(</span><span class=n>dotStr</span><span class=o>.</span><span class=na>split</span><span class=o>(</span><span class=s>&#34;.&#34;</span><span class=o>).</span><span class=na>length</span><span class=o>,</span> <span class=n>0</span><span class=o>);</span>
        <span class=n>assertEquals</span><span class=o>(</span><span class=n>dotStr</span><span class=o>.</span><span class=na>split</span><span class=o>(</span><span class=s>&#34;\\.&#34;</span><span class=o>).</span><span class=na>length</span><span class=o>,</span> <span class=n>3</span><span class=o>);</span>

        <span class=n>String</span> <span class=n>spaceStr</span><span class=o>=</span><span class=s>&#34;a  b c&#34;</span><span class=o>;</span><span class=c1>//a与b之间两个空格,b与c之间一个空格
</span><span class=c1></span>        <span class=n>assertEquals</span><span class=o>(</span><span class=n>spaceStr</span><span class=o>.</span><span class=na>split</span><span class=o>(</span><span class=s>&#34; &#34;</span><span class=o>).</span><span class=na>length</span><span class=o>,</span> <span class=n>4</span><span class=o>);</span><span class=c1>//一个空格
</span><span class=c1></span>        <span class=n>assertEquals</span><span class=o>(</span><span class=n>spaceStr</span><span class=o>.</span><span class=na>split</span><span class=o>(</span><span class=s>&#34; +&#34;</span><span class=o>).</span><span class=na>length</span><span class=o>,</span> <span class=n>3</span><span class=o>);</span><span class=c1>//一个或多个空格
</span><span class=c1></span>        <span class=n>assertEquals</span><span class=o>(</span><span class=s>&#34;a b c&#34;</span><span class=o>.</span><span class=na>split</span><span class=o>(</span><span class=s>&#34; +&#34;</span><span class=o>).</span><span class=na>length</span><span class=o>,</span> <span class=n>3</span><span class=o>);</span><span class=c1>//一个或多个空格
</span><span class=c1></span>        <span class=n>assertEquals</span><span class=o>(</span><span class=s>&#34;a  b    c&#34;</span><span class=o>.</span><span class=na>split</span><span class=o>(</span><span class=s>&#34; +&#34;</span><span class=o>).</span><span class=na>length</span><span class=o>,</span> <span class=n>3</span><span class=o>);</span><span class=c1>//一个或多个空格
</span><span class=c1></span>
        <span class=c1>//顺便提一句,与正则无关,注意下面这个结果,这是Java的split方法自己处理的
</span><span class=c1></span>        <span class=n>assertEquals</span><span class=o>(</span><span class=s>&#34;a b c   &#34;</span><span class=o>.</span><span class=na>split</span><span class=o>(</span><span class=s>&#34; &#34;</span><span class=o>).</span><span class=na>length</span><span class=o>,</span> <span class=n>3</span><span class=o>);</span><span class=c1>//split会去除最后为空的结果
</span><span class=c1></span>        <span class=n>assertEquals</span><span class=o>(</span><span class=s>&#34; a b c&#34;</span><span class=o>.</span><span class=na>split</span><span class=o>(</span><span class=s>&#34; &#34;</span><span class=o>).</span><span class=na>length</span><span class=o>,</span> <span class=n>4</span><span class=o>);</span><span class=c1>//split不会去除前面为空的结果
</span><span class=c1></span>    <span class=o>}</span>
</code></pre></div><p>以上就是一个正则的简单应用，其实平时工作中除了编程我们也会经常用到正则，比如搜索所有 Word 文档（*.doc）,在文本编辑器中搜索和替换文字等等。正则表达式经过数年的发展，已经逐渐从模糊而深奥的数学概念，发展成为在计算机各类工具和软件包应用中的主要功能，成为人们工作中的一个利器。</p><div class=gdoc-page__anchorwrap><h2 id=什么是正则表达式>什么是正则表达式<a data-clipboard-text=https://l10178.github.io/bits-pieces/linux/regular-expressions/#什么是正则表达式 class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 什么是正则表达式" href=#什么是正则表达式><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><p>正则表达式（Regular Expression，regex、regexp，以下简称正则）是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。</p><p>完整的正则表达式由两种字符构成，特殊字符（又译元字符）和普通文字。如果把正则表达式想象成普通的语言，普通文字相当于语言中的单词，而元字符相当于语法。就像一门语言一样，正则是烦琐而强大的，学会之后的应用会让你除了提高效率外，会给你带来绝对的成就感。只要坚持去学，一定会放弃的。</p><div class=gdoc-page__anchorwrap><h2 id=正则引擎>正则引擎<a data-clipboard-text=https://l10178.github.io/bits-pieces/linux/regular-expressions/#正则引擎 class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 正则引擎" href=#正则引擎><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><p>引擎就相当于语言的编译器，解释器，用来对正则进行语法分析。不同的引擎决定了某个正则能否匹配、在何处匹配，以及匹配成功或报告失败的速度，另外知道正则表达式引擎是如何工作的有助于理解为何某个正则表达式在一个平台好用，换个平台就不好使了。</p><p>正则引擎主要可以分为两大类：一种是 DFA，一种是 NFA。先别管这两个的含义，只需要知道这两个名字。这两种引擎都有了很长的历史，当中也由这两种引擎产生了很多变体。后来又出了一个 POSIX 标准，用来规范这种现象。DFA 是符合这种标准的，NFA 不符合，这样一来，主流的正则引擎又分为 3 类：DFA，传统型 NFA，POSIX NFA。</p><p>关于 DFA 和 NFA 的详细区别，在这里先不提了，因为正则本身就是一个很难懂的语言，一下子提这么多怕大家真的放弃了。但是要了解一点，不同的引擎不同的写法，速度是不一样的，如果对性能要求高的话，还是需要了解引擎的实现方式。Java 和 JavaScript 都是 NFA 类型。除去引擎的不同，不同的语言对正则的实现也有差异，所以下面所有的语法和实例，多以 Java 为主，尽量兼顾 JavaScript，不考虑 Python、C++、Swift 等其他语言。</p><div class=gdoc-page__anchorwrap><h2 id=基础语法>基础语法<a data-clipboard-text=https://l10178.github.io/bits-pieces/linux/regular-expressions/#基础语法 class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 基础语法" href=#基础语法><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><table><thead><tr><th style=text-align:left>元字符</th><th style=text-align:left>说明</th></tr></thead><tbody><tr><td style=text-align:left>^</td><td style=text-align:left>匹配输入字符串开始的位置。</td></tr><tr><td style=text-align:left>$</td><td style=text-align:left>匹配输入字符串结尾的位置。</td></tr><tr><td style=text-align:left>_</td><td style=text-align:left>零次或多次匹配前面的字符或子表达式。例如，zo_ 匹配"z"和"zoo"。* 等效于 {0,}。</td></tr><tr><td style=text-align:left>+</td><td style=text-align:left>一次或多次匹配前面的字符或子表达式。例如，&ldquo;zo+&ldquo;与"zo"和"zoo"匹配，但与"z"不匹配。+ 等效于 {1,}。</td></tr><tr><td style=text-align:left>?</td><td style=text-align:left>零次或一次匹配前面的字符或子表达式。例如，&ldquo;do(es)?&ldquo;匹配"do"或"does"中的"do&rdquo;。? 等效于 {0,1}。</td></tr><tr><td style=text-align:left>{n}</td><td style=text-align:left>n 是非负整数。正好匹配 n 次。例如，&ldquo;o{2}&ldquo;与"Bob"中的"o"不匹配，但与"food"中的两个"o"匹配。</td></tr><tr><td style=text-align:left>{n,}</td><td style=text-align:left>n 是非负整数。至少匹配 n 次。例如，&ldquo;o{2,}&ldquo;不匹配"Bob"中的"o&rdquo;，而匹配"foooood"中的所有 o。&ldquo;o{1,}&ldquo;等效于"o+"。&ldquo;o{0,}&ldquo;等效于"o*"。</td></tr><tr><td style=text-align:left>{n,m}</td><td style=text-align:left>M 和 n 是非负整数，其中 n &lt;= m。匹配至少 n 次，至多 m 次。注意：您不能将空格插入逗号和数字之间。</td></tr><tr><td style=text-align:left>?</td><td style=text-align:left>当此字符紧随任何其他限定符（*、+、?、{n}、{n,}、{n,m}）之后时，匹配模式是"非贪心的&rdquo;。&ldquo;非贪心的"模式匹配搜索到的、尽可能短的字符串，而默认的"贪心的"模式匹配搜索到的、尽可能长的字符串。例如，在字符串"oooo"中，&ldquo;o+?&ldquo;只匹配单个"o&rdquo;，而"o+&ldquo;匹配所有"o&rdquo;。</td></tr><tr><td style=text-align:left>.</td><td style=text-align:left>匹配除&rdquo;\r\n"之外的任何单个字符。若要匹配包括&rdquo;\r\n"在内的任意字符，请使用诸如&rdquo;[\s\S]&ldquo;之类的模式。</td></tr><tr><td style=text-align:left>(pattern)</td><td style=text-align:left>匹配 pattern 并捕获该匹配的子表达式。可以使用 $0…$9 属性从结果"匹配"集合中检索捕获的匹配。若要匹配括号字符 ( )，请使用&rdquo;(&ldquo;或者&rdquo;)"。</td></tr><tr><td style=text-align:left>x│y</td><td style=text-align:left>匹配 x 或 y。例如'(z│f)ood' 匹配"zood"或"food&rdquo;。</td></tr><tr><td style=text-align:left>[xyz]</td><td style=text-align:left>字符集。匹配包含的任一字符。例如，"[abc]&ldquo;匹配"plain"中的"a&rdquo;。</td></tr><tr><td style=text-align:left>[^xyz]</td><td style=text-align:left>反向字符集。匹配未包含的任何字符。例如，"[^abc]&ldquo;匹配"plain"中"p&rdquo;，&ldquo;l&rdquo;，&ldquo;i&rdquo;，&ldquo;n&rdquo;。</td></tr><tr><td style=text-align:left>[a-z]</td><td style=text-align:left>字符范围。匹配指定范围内的任何字符。例如，"[a-z]&ldquo;匹配"a"到"z"范围内的任何小写字母。</td></tr><tr><td style=text-align:left>[^a-z]</td><td style=text-align:left>反向范围字符。匹配不在指定的范围内的任何字符。例如，"[^a-z]&ldquo;匹配任何不在"a"到"z"范围内的任何字符。</td></tr><tr><td style=text-align:left>\b</td><td style=text-align:left>匹配一个字边界，即字与空格间的位置。例如，&ldquo;er\b"匹配"never"中的"er&rdquo;，但不匹配"verb"中的"er&rdquo;。</td></tr><tr><td style=text-align:left>\B</td><td style=text-align:left>非字边界匹配。&ldquo;er\B"匹配"verb"中的"er&rdquo;，但不匹配"never"中的"er&rdquo;。</td></tr><tr><td style=text-align:left>\d</td><td style=text-align:left>数字字符匹配。等效于 [0-9]。</td></tr><tr><td style=text-align:left>\D</td><td style=text-align:left>非数字字符匹配。等效于 [^0-9]。</td></tr><tr><td style=text-align:left>\f</td><td style=text-align:left>换页符匹配。等效于 \x0c 和 \cL。</td></tr><tr><td style=text-align:left>\n</td><td style=text-align:left>换行符匹配。等效于 \x0a 和 \cJ。</td></tr><tr><td style=text-align:left>\r</td><td style=text-align:left>匹配一个回车符。等效于 \x0d 和 \cM。</td></tr><tr><td style=text-align:left>\s</td><td style=text-align:left>匹配任何空白字符，包括空格、制表符、换页符等。</td></tr><tr><td style=text-align:left>\S</td><td style=text-align:left>匹配任何非空白字符。</td></tr><tr><td style=text-align:left>\t</td><td style=text-align:left>制表符匹配。</td></tr><tr><td style=text-align:left>\w</td><td style=text-align:left>匹配任何字类字符，包括下划线。与&rdquo;[A-Za-z0-9_]&ldquo;等效。</td></tr><tr><td style=text-align:left>\W</td><td style=text-align:left>与任何非单词字符匹配。与&rdquo;[^a-za-z0-9_]&ldquo;等效。</td></tr></tbody></table><div class=gdoc-page__anchorwrap><h2 id=运算符优先级>运算符优先级<a data-clipboard-text=https://l10178.github.io/bits-pieces/linux/regular-expressions/#运算符优先级 class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 运算符优先级" href=#运算符优先级><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><p>正则表达式从左到右进行计算，并遵循优先级顺序，这与算术表达式非常类似。相同优先级的从左到右进行运算，不同优先级的运算先高后低。下表从最高到最低说明了各种正则表达式运算符的优先级顺序.</p></article><div class="gdoc-page__footer flex flex-wrap justify-between"></div></div></main><footer class=gdoc-footer><div class="container flex flex-wrap"><span class=gdoc-footer__item>Copyright © 2020-2022 <a href=https://www.nxest.com class=gdoc-footer__link>nxest.com</a>.</span></div></footer></div><script defer src=/bits-pieces/js/en.search.min.js></script><script defer src=/bits-pieces/js/clipboard.min.js></script><script>document.addEventListener("DOMContentLoaded",function(event){var clipboard=new ClipboardJS('.clip');});</script></body></html>